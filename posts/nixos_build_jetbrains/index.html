<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Building JetBrains IDEs with Nix - Pedro's Blog</title><meta name=description content="This one is mostly a note for myself, and is quite possibly not the cleanest solution ever (still not confident in my Nix skills).
NixOS sometimes lags behind the latest versions of the JetBrains IDEs, so I managed to scrape together a file which can be used to build the latest versions of the IDEs. I found the base for this file in a GitHub discussion about building JetBrains Gateway, which incidentally also works, if you substitute in the right links."><meta name=author content="Pedro Batista"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Pedro\u0027s Blog","url":"https:\/\/pedrovhb.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/pedrovhb.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/pedrovhb.com\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/pedrovhb.com\/posts\/nixos_build_jetbrains\/","name":"Building jet brains ID es with nix"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Pedro Batista"},"headline":"Building JetBrains IDEs with Nix","description":"This one is mostly a note for myself, and is quite possibly not the cleanest solution ever (still not confident in my Nix skills).\nNixOS sometimes lags behind the latest versions of the JetBrains IDEs, so I managed to scrape together a file which can be used to build the latest versions of the IDEs. I found the base for this file in a GitHub discussion about building JetBrains Gateway, which incidentally also works, if you substitute in the right links.","inLanguage":"en","wordCount":248,"datePublished":"2022-12-26T16:09:00","dateModified":"2022-12-26T16:09:00","image":"https:\/\/pedrovhb.com\/","keywords":[""],"mainEntityOfPage":"https:\/\/pedrovhb.com\/posts\/nixos_build_jetbrains\/","publisher":{"@type":"Organization","name":"https:\/\/pedrovhb.com\/","logo":{"@type":"ImageObject","url":"https:\/\/pedrovhb.com\/","height":60,"width":60}}}</script><meta property="og:title" content="Building JetBrains IDEs with Nix"><meta property="og:description" content="This one is mostly a note for myself, and is quite possibly not the cleanest solution ever (still not confident in my Nix skills).
NixOS sometimes lags behind the latest versions of the JetBrains IDEs, so I managed to scrape together a file which can be used to build the latest versions of the IDEs. I found the base for this file in a GitHub discussion about building JetBrains Gateway, which incidentally also works, if you substitute in the right links."><meta property="og:url" content="https://pedrovhb.com/posts/nixos_build_jetbrains/"><meta property="og:type" content="website"><meta property="og:site_name" content="Pedro's Blog"><meta name=twitter:title content="Building JetBrains IDEs with Nix"><meta name=twitter:description content="This one is mostly a note for myself, and is quite possibly not the cleanest solution ever (still not confident in my Nix skills).
NixOS sometimes lags behind the latest versions of the JetBrains â€¦"><meta name=twitter:card content="summary_large_image"><link href=https://pedrovhb.com/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.115.2"><link rel=alternate href=https://pedrovhb.com/index.xml type=application/rss+xml title="Pedro's Blog"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><script async defer data-website-id=b4adb5d5-7d6f-4f1a-951f-f8dc187469d6 src=https://do.pedrovhb.com/umm.js></script>
<link rel=stylesheet href=https://pedrovhb.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://pedrovhb.com/css/highlight.min.css><link rel=stylesheet href=https://pedrovhb.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://pedrovhb.com/>Pedro's Blog</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li><a title=About href=/page/about/>About</a></li></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-heading><h1>Building JetBrains IDEs with Nix</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>This one is mostly a note for myself, and is quite possibly not the cleanest solution ever (still not confident in my Nix skills).</p><p>NixOS sometimes lags behind the latest versions of the JetBrains IDEs, so I managed to scrape together a file which can be used to build the latest versions of the IDEs.
I found the base for this file in a GitHub discussion about building JetBrains Gateway, which incidentally also works, if you substitute in the right links.
For PyCharm, I had to try building a few times and adding missing dependencies to <code>buildInputs</code> as I went along by using <code>nix-locate</code> to find missing shared objects.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span><span style=color:#66d9ef>with</span> <span style=color:#f92672>import</span> <span style=color:#e6db74>&lt;nixpkgs&gt;</span> {};
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  my-pycharm <span style=color:#f92672>=</span> pkgs<span style=color:#f92672>.</span>stdenv<span style=color:#f92672>.</span>mkDerivation <span style=color:#66d9ef>rec</span> {
</span></span><span style=display:flex><span>    pname <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jetbrains-pycharm&#34;</span>;
</span></span><span style=display:flex><span>    version <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;2022.3&#34;</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    src <span style=color:#f92672>=</span> builtins<span style=color:#f92672>.</span>fetchurl {
</span></span><span style=display:flex><span>      url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://download.jetbrains.com/python/pycharm-professional-2022.3.tar.gz&#34;</span>;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    nativeBuildInputs <span style=color:#f92672>=</span> [ pkgs<span style=color:#f92672>.</span>autoPatchelfHook pkgs<span style=color:#f92672>.</span>makeWrapper ];
</span></span><span style=display:flex><span>    buildInputs <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>jetbrains<span style=color:#f92672>.</span>jdk
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>zlib
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>glib
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>glibc
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>libxcrypt
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>musl
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>xorg<span style=color:#f92672>.</span>libX11
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>xorg<span style=color:#f92672>.</span>libXi
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>xorg<span style=color:#f92672>.</span>libXrender
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>freetype
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>alsa-lib
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>xorg<span style=color:#f92672>.</span>libXtst
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>glibc
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>linux-pam
</span></span><span style=display:flex><span>      pkgs<span style=color:#f92672>.</span>cups
</span></span><span style=display:flex><span>    ];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    installPhase <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      mkdir -p $out/share
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      cp -r . $out/share
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      rm -r $out/share/jbr
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      makeWrapper \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        $out/share/bin/pycharm.sh \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        $out/bin/jetbrains-pycharm \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        --prefix LD_LIBRARY_PATH : $out/lib \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        --set GATEWAY_JDK &#34;</span><span style=color:#e6db74>${</span>pkgs<span style=color:#f92672>.</span>jdk<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34; \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        --set JETBRAINSCLIENT_JDK &#34;</span><span style=color:#e6db74>${</span>pkgs<span style=color:#f92672>.</span>jetbrains<span style=color:#f92672>.</span>jdk<span style=color:#f92672>.</span>home<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Building is as simple as dropping the above into a file called <code>default.nix</code> and running <code>nix-build</code> in the same directory.
That&rsquo;ll build the thing and make a symlink to the built IDE path called <code>result</code> (the IDE itself is in the Nix store), so it can then be run with <code>./result/bin/jetbrains-pycharm</code> from the same directory.</p><p>Enjoy!</p></article><ul class="pager blog-pager"><li class=previous><a href=https://pedrovhb.com/posts/purest_of_evils/ data-toggle=tooltip data-placement=top title="The purest of evils">&larr; Previous Post</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:pedrovhb@gmail.com title="Email me" class="umami--click--Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/pedrovhb title=GitHub class=umami--click--GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/pedrovhb title=LinkedIn class=umami--click--LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista title=StackOverflow class=umami--click--StackOverflow><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=/page/about>Pedro Batista</a>
&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://pedrovhb.com/>Pedro's Blog</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.115.2</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous></script>
<script src=https://code.jquery.com/jquery-3.5.1.slim.min.js integrity=sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://pedrovhb.com/js/main.js></script>
<script src=https://pedrovhb.com/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://pedrovhb.com/js/load-photoswipe.js></script></body></html>